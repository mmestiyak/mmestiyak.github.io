{% extends "base.html" %}

{% block title %}{{ taxonomy.name | capitalize }}: {{ term.name }} — {{ config.title }}{% endblock title %}
{% block description %}Posts in {{ taxonomy.name }} "{{ term.name }}" on {{ config.title }}.{% endblock description %}
{% block head_extra %}
{% if paginator and paginator.current_index and paginator.current_index > 1 %}
<meta name="robots" content="noindex,follow">
{% endif %}
{% endblock head_extra %}
{% block content %}
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8">
    <header class="mb-6 sm:mb-8">
        <h1 class="text-2xl sm:text-3xl lg:text-4xl font-light text-gray-900 mb-2 sm:mb-3">{{ term.name }}</h1>
        <p class="text-gray-500 text-sm sm:text-base">{{ term.pages | length }} {{ term.pages | length | pluralize(singular="log", plural="logs") }} tagged with "{{ term.name }}"</p>
    </header>

    <div class="space-y-3 sm:space-y-4">
        {% for page in term.pages %}
        <article class="group py-3 sm:py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50/50 transition-colors rounded-lg px-2 sm:px-3 -mx-2 sm:mx-0">
            <div class="flex-1 min-w-0">
                    <h2 class="text-base sm:text-lg font-medium text-gray-900 mb-1.5 group-hover:text-brand transition-colors">
                        <a href="{{ page.permalink }}" class="hover:underline">{{ page.title }}</a>
                    </h2>
                    
                    <div class="flex flex-col sm:flex-row sm:items-center gap-1.5 sm:gap-2 text-xs sm:text-sm text-gray-400 mb-1.5">
                        <time datetime="{{ page.date }}">{{ page.date | date(format="%b %d, %Y") }}</time>
                        {% if page.reading_time %}
                        <span class="hidden sm:inline">•</span>
                        <span>{{ page.reading_time }} min read</span>
                        {% endif %}
                        {% if page.taxonomies.tags %}
                        <span class="hidden sm:inline">•</span>
                        <div class="flex flex-wrap gap-1">
                            {% for tag in page.taxonomies.tags | slice(end=3) %}
                            <a href="{{ get_taxonomy_url(kind="tags", name=tag) }}" class="text-gray-500 hover:text-black transition-colors">#{{ tag }}</a>
                            {% endfor %}
                            {% if page.taxonomies.tags | length > 3 %}
                            <span class="text-gray-300">+{{ page.taxonomies.tags | length - 3 }} more</span>
                            {% endif %}
                        </div>
                        {% endif %}
                    </div>
                    
                    {% if page.description %}
                    <p class="text-gray-500 text-sm leading-relaxed line-clamp-2 sm:line-clamp-3">{{ page.description }}</p>
                    {% endif %}
                </div>
            </div>
        </article>
        {% endfor %}
    </div>
</div>
{% endblock content %}
